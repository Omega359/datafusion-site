                                               ---
layout: post
title: Apache DataFusion 49.0.0 Released
date: 2025-07-20
author: pmc
categories: [release]
---

<!--
{% comment %}
Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements.  See the NOTICE file distributed with
this work for additional information regarding copyright ownership.
The ASF licenses this file to you under the Apache License, Version 2.0
(the "License"); you may not use this file except in compliance with
the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
{% endcomment %}
-->

<!-- see https://github.com/apache/datafusion/issues/16347 for details -->

## Introduction

We are very proud to announce [DataFusion 49.0.0]. This blog highlights some of the
many major improvements since we released [DataFusion 46.0.0]. This new version
represents a significant milestone for the project, packing in a wide range of
improvements and fixes. You can find the complete details in the full [changelog].

[DataFusion 49.0.0]: https://crates.io/crates/datafusion/49.0.0
[DataFusion 46.0.0]: https://datafusion.apache.org/blog/2025/03/24/datafusion-46.0.0/
[changelog]: https://github.com/apache/datafusion/blob/branch-49/dev/changelog/49.0.0.md

[Apache DataFusion] is an extensible query engine, written in [Rust], that
uses [Apache Arrow] as its in-memory format. DataFusion is used by developers to
create new, fast data centric systems such as databases, dataframe libraries,
machine learning and streaming applications. While [DataFusionâ€™s primary design
goal] is to accelerate the creation of other data centric systems, it has a
reasonable experience directly out of the box as a [dataframe library],
[python library] and [command line SQL tool].

[apache datafusion]: https://datafusion.apache.org/
[rust]: https://www.rust-lang.org/
[apache arrow]: https://arrow.apache.org
[DataFusionâ€™s primary design goal]: https://datafusion.apache.org/user-guide/introduction.html#project-goals
[dataframe library]: https://datafusion.apache.org/user-guide/dataframe.html
[python library]: https://datafusion.apache.org/python/
[command line SQL tool]: https://datafusion.apache.org/user-guide/cli/

DataFusion's core thesis is that as a community, together we can build much more
advanced technology than any of us as individuals or companies could do alone.
Without DataFusion, highly performant vectorized query engines would remain
the domain of a few large companies and world-class research institutions.
With DataFusion, we can all build on top of a shared foundation, and focus on
what makes our projects unique.

## Community Growth  ðŸ“ˆ

In the last few months, between `46.0.0` and `49.0.0`, our community continues to grow in new and exciting ways.

1. We added several PMC members and new committers: [berkay], [xudong963] and [timsaucer] joined the PMC,
   [blaginin], [milenkovicm], [adriangb] and [kosiew] joined as committers. See the [mailing list] for more details.
2. In the [core DataFusion repo] alone we reviewed and accepted almost fixme PRs from fixme different
   committers, created over fixme issues and closed fixme of them ðŸš€. All changes are listed in the detailed
   [changelogs].
3. DataFusion published a number of blog posts including [User defined Window Functions], Optimizing SQL (and DataFrames)
   in DataFusion [part 1], [part 2] and [Cancelling Long-Running Queries].

[core DataFusion repo]: https://github.com/apache/arrow-datafusion
[changelogs]: https://github.com/apache/datafusion/tree/main/dev/changelog
[mailing list]: https://lists.apache.org/list.html?dev@datafusion.apache.org
[berkay]: https://github.com/berkaysynnada
[xudong963]: https://github.com/xudong963
[timsaucer]: https://github.com/timsaucer
[blaginin]: https://github.com/blaginin
[milenkovicm]: https://github.com/milenkovicm
[adriangb]: https://github.com/adriangb
[kosiew]: https://github.com/kosiew
[Use defined Window Functions]: https://datafusion.apache.org/blog/2025/04/19/user-defined-window-functions
[part 1]: https://datafusion.apache.org/blog/2025/06/15/optimizing-sql-dataframes-part-one
[part 2]: https://datafusion.apache.org/blog/2025/06/15/optimizing-sql-dataframes-part-two
[Cancelling Long-Running Queries]: https://datafusion.apache.org/blog/2025/06/30/cancellation

<!--
$ git log --pretty=oneline 46.0.0..49.0.0 . | wc -l
     1532 (fixme)

$ git shortlog -sn 46.0.0..49.0.0 . | wc -l
     206 (fixme)

https://crates.io/crates/datafusion/49.0.0
DataFusion 49 released July 20, 2025

https://crates.io/crates/datafusion/46.0.0
DataFusion 46 released March 7, 2025

Issues created in this time: 271 open, 320 closed 
https://github.com/apache/datafusion/issues?q=is%3Aissue+created%3A2025-03-07..2025-07-20

Issues closed: 440
https://github.com/apache/arrow-datafusion/issues?q=is%3Aissue+closed%3A2025-03-07..2025-07-20

PRs merged in this time 751
https://github.com/apache/arrow-datafusion/pulls?q=is%3Apr+merged%3A2025-03-07..2025-07-20

-->

## Improved Performance ðŸš€

DataFusion continues to focus on enhancing performance as can be seen in the ClickBench Benchmark:

<img
src="/blog/images/datafusion-49.0.0/performance_over_time.png"
width="100%"
class="img-responsive"
alt="ClickBench performance results over time for DataFusion"
/>

**Figure 1**: ClickBench performance improved over 33% between DataFusion 33
(released Nov. 2023) and DataFusion 49 (released July. 2025).

Here are some noteworthy optimizations since DataFusion 46 was released:

- **Improve performance of `FIRST_VALUE` and `LAST_VALUE`:** The `FIRST_VALUE` and `LAST_VALUE` functions have
  improved by implementing a GroupsAccumulator for them. When cardinality is high using a groups accumulator
  improves the performance of these functions significantly (PR's [#15266](https://github.com/apache/datafusion/pull/15266)
  and [#15542](https://github.com/apache/datafusion/pull/15542) by [UBarney](https://github.com/UBarney)).
- **Improve performance of `MIN`, `MAX` and `AVG` for durations:** Similar to the above improvement a GroupsAccumulator was
  implemented for `MIN`, `MAX` and `AVG` functions to improve their performance.
- (PRs [#15322](https://github.com/apache/datafusion/pull/15322) and [#15748](https://github.com/apache/datafusion/pull/15748)
  by [shriti2522](https://github.com/shruti2522)).
- **Add short circuit evaluation for `AND` and `OR`:** For some queries it is possibly to skip the evaluation of
  the right operand if the left is known to be false (`AND`) or true (`OR`). In some cases this can result in
  [significant performance improvements](https://github.com/apache/datafusion/issues/11212#issuecomment-2753584617).
  (PRs [#15462](https://github.com/apache/datafusion/pull/15462) and [#15694](https://github.com/apache/datafusion/pull/15694) 
  by [acking-you](https://github.com/acking-you)).
- **Improve TopK exit optimization for partially sorted input:** TopK had perviously implemented an early termination
  optimization (TopK) only for fully sorted data. However, many real-world datasets are only partially sorted
  (for example, a time-series dataset sorted by day but not within each day). This improvement extends that optimization
  to partially sorted data based on a common prefix between the input ordering and the queryâ€™s requested ordering
  (PR [#15563](https://github.com/apache/datafusion/pull/15563) by [geoffreyclaude](https://github.com/geoffreyclaude)).
- **Disable re-validation of spilled files:** DataFusion when it spills operations to disk was re-validating the data when
  reading the spilled files back in. This is unnecessary and expensive as the data is known to be valid when it was written out
  (PR [#15454](https://github.com/apache/datafusion/pull/15454) by [zebsme](https://github.com/zebsme)).
- **Speed up optimize_projection:** In some cases a projection can be removed as it's unnecessary in a query. A series of PR's
  improved the logic surrounding the selection of unnecessary projections leading to more projections being able to be removed
  (PRs [#15787](https://github.com/apache/datafusion/pull/15787), [#15761](https://github.com/apache/datafusion/pull/15761),
  and [#15746](https://github.com/apache/datafusion/pull/15746) by [xudong963](https://github.com/xudong963)).
- **Accelerated the `ascii` function:** The `ascii` function was optimized to significantly improve its performance
  (PR [#16087](https://github.com/apache/datafusion/pull/16087) by [tlm365](https://github.com/tlm365)).
- **Equivalence system overhaul:** The equivalence system was rewritten to reduce computational complexity leading to
  much faster planning times in some cases, especially those with a [large number of columns](https://github.com/apache/datafusion/pull/16217#pullrequestreview-2891941229)
  PR [#16217](https://github.com/apache/datafusion/pull/16217) by [ozankabak](https://github.com/ozankabak)
- **Improve TopK dynamic filtering pushdown:** For queries such as `select * from data order by timestamp desc limit 10`
  where there could be a large number of parquet files that might need to be scanned to find the top 10 rows. With this
  optimization it's possible to pushdown filtering such that only the files that might include the requested rows (as
  determined by file metadata such as min and max values for timestamp) are looked at. This can drastically improve 
  query performance (We've seen over 1.5x improvement for some tpch style queries)
  PR [#15770](https://github.com/apache/datafusion/pull/15770) by [adriangb](https://github.com/adriangb).


## New Features âœ¨

There are too many new features in the last few months to list them all, but here are some highlights:

### Explain tree rendering

https://github.com/apache/datafusion/issues/14914

### VARCHAR defaults to Utf8View

https://github.com/apache/datafusion/issues/15096

### Async User Defined Functions

https://github.com/apache/datafusion/issues/6518
https://github.com/apache/datafusion/pull/14837

### DataFusion spark

https://github.com/apache/datafusion/pull/15168

### Within group

https://github.com/apache/datafusion/pull/13511

### Equivalence system overhaul

https://github.com/apache/datafusion/pull/16217

### Spill to disk file compression

https://github.com/apache/datafusion/pull/16268

### Parquet modular encryption

https://github.com/apache/datafusion/pull/16351

### TopK dynamic filter pushdown

https://github.com/apache/datafusion/pull/15770
Note - might be a blog post - https://github.com/apache/datafusion/issues/15513

### New and improved Functions

array_max(https://github.com/apache/datafusion/pull/14470),
union_tag(https://github.com/apache/datafusion/pull/14687),
string_agg(https://github.com/apache/datafusion/pull/14412) (improvement)

## Upgrade Guide and Changelog

Upgrading to 49.0.0 should be straightforward for most users, but do review the 
[Upgrade Guide for DataFusion](https://datafusion.apache.org/library-user-guide/upgrading.html) for detailed
steps and code changes. The upgrade guide covers breaking changes and provides code snippets to help with the
transition. For a comprehensive list of all changes, please refer to the [changelog] for 49.0.0 which 
enumerates every merged PR in this release, including many smaller fixes and improvements that we couldnâ€™t 
cover in this post.

## How to Get Involved

DataFusion is not a project built or driven by a single person, company, or
foundation. Rather, our community of users and contributors work together to
build a shared technology that none of us could have built alone.

If you are interested in joining us we would love to have you. You can try out
DataFusion on some of your own data and projects and let us know how it goes,
contribute suggestions, documentation, bug reports, or a PR with documentation,
tests or code. A list of open issues suitable for beginners is [here] and you
can find how to reach us on the [communication doc].

[here]: https://github.com/apache/arrow-datafusion/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22
[communication doc]: https://datafusion.apache.org/contributor-guide/communication.html
https://github.com/jcsherin